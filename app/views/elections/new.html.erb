<% provide(:title, "Create an election") %>
<h1>Create an election</h1>
<h2> Group: <%= @group.name %> </h2>

<%= nested_form_for(@election, url: group_elections_path(@group)) do |f| %>
	<%= render 'shared/error_messages', object: f.object %>

	<%= f.text_field :name, placeholder: "election name" %>

	<%= f.text_area :info, placeholder: "election instructions (optional)" %>

	<br><br>

	<%= f.label :start_time, "Start time:" %>
	<%= f.datetime_select :start_time, default: Time.now %>

	<%= f.label :finish_time, "Finish time:" %>
	<%= f.datetime_select :finish_time, default: Time.now + 1.week %>
	
	<br><br>

	<script>
	$(document).ready(function(){
		$(document).keypress(function(event){ // change to ".enter_election_name"
    		if(event.keyCode == 13){ // clicked enter, which is key number 13.
        		$('#add_new_choice').click();
        		return false;
    		}
		});
	});
	</script>

	<h3>Choices:</h3>
	<br>
	<% f.fields_for :choices do |c| %>
		<%= c.label :name %>
		<%= c.text_field :name, placeholder: "choice", :class => "enter_choice_name" %>
		<%= c.link_to_remove "Remove" %>
	<% end %>
	<p><%= f.link_to_add "Add new choice", :choices, id: "add_new_choice" %></p>
	
	<br>
	<br>
	

	<%= f.submit "Save", class: "btn btn-large btn-primary" %>
	<%= f.submit "Add another election", class: "btn btn-large btn-primary" %>
<% end %>